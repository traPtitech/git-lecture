import{_ as s,c as i,o as a,a1 as t}from"./chunks/framework.DPIBHfDg.js";const g=JSON.parse('{"title":"おまけ2: SSHの設定","description":"","frontmatter":{},"headers":[],"relativePath":"basic/ssh.md","filePath":"basic/ssh.md"}'),e={name:"basic/ssh.md"},h=t(`<h1 id="おまけ2-sshの設定" tabindex="-1">おまけ2: SSHの設定 <a class="header-anchor" href="#おまけ2-sshの設定" aria-label="Permalink to &quot;おまけ2: SSHの設定&quot;">​</a></h1><p>プッシュしたりプルしたりするときに、何回もユーザー名とパスワードを求められて入力がめんどくさかったのではないでしょうか。そんな人はパスワード認証より安全な、SSH認証を使うようにしましょう。</p><p>既に鍵を登録してあるかどうかは <a href="https://git.trap.jp/user/settings/keys" target="_blank" rel="noreferrer">SSH / GPGキー - traP Git</a> で確認できます。</p><p>まだ登録していない人は以下の手順で作成・登録してください。</p><h3 id="鍵の生成" tabindex="-1">鍵の生成 <a class="header-anchor" href="#鍵の生成" aria-label="Permalink to &quot;鍵の生成&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-dark github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> ssh-keygen</span><span style="--shiki-light:#79B8FF;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> ed25519</span><span style="--shiki-light:#79B8FF;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> {GitHub</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> or</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> traQ</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> に登録してあるメールアドレス}</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">Generating</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> public/private</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> ed25519</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> key</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> pair.</span></span>
<span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> which</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> save</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> key</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#E1E4E8;"> (~/.ssh/id_ed25519):</span></span></code></pre></div><p>鍵のファイルを作成する場所を聞かれますが、鍵を登録したことがない人はデフォルトでよいのでそのまま Enter を押します。</p><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>既に同じ場所に同じファイル名の鍵を作成したことがある場合、上書きされてしまうので注意してください。</p></div><p>以下のようにパスフレーズの設定を求められますが、そのまま Enter を押します。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-dark github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> passphrase</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#E1E4E8;"> (empty </span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;">for</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> no</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> passphrase</span><span style="--shiki-light:#E1E4E8;--shiki-dark:#E1E4E8;">):</span></span></code></pre></div><p>パスフレーズの再入力でも同様に Enter を押します。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-dark github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">Enter</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> same</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> passphrase</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> again:</span></span></code></pre></div><h3 id="鍵の登録" tabindex="-1">鍵の登録 <a class="header-anchor" href="#鍵の登録" aria-label="Permalink to &quot;鍵の登録&quot;">​</a></h3><p>今生成した鍵の公開鍵を以下のコマンドで表示します。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-dark github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> cat</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> ~/.ssh/id_ed25519.pub</span></span></code></pre></div><p>出力された文字列をコピーしてください(メールアドレスが含まれていますが、それも含めて 1 行丸ごとコピーしてください)。 Mac の場合は以下のコマンドを実行すると、結果を出力せずにコピーできます。</p><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-dark github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> cat</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> ~/.ssh/id_ed25519.pub</span><span style="--shiki-light:#F97583;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;"> pbcopy</span></span></code></pre></div><p><a href="https://git.trap.jp/user/settings/keys" target="_blank" rel="noreferrer">SSH and GPG keys</a> にアクセスし、「キーを追加」をクリックします。</p><p>キー名: <code>id_ed25519</code> 内容: <code>{先ほどコピーした文字列}</code></p><p>を入力し、「キーを追加」をクリックします。 これで登録が完了です。</p><h3 id="接続確認" tabindex="-1">接続確認 <a class="header-anchor" href="#接続確認" aria-label="Permalink to &quot;接続確認&quot;">​</a></h3><p>以下のコマンドを実行してください。<code>yes/no/[fingerprint]</code>は yes を選択してください。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-dark github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> ssh</span><span style="--shiki-light:#79B8FF;--shiki-dark:#79B8FF;"> -T</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> ssh://git@git.trap.jp:2200</span></span></code></pre></div><p>以下のように表示されたら成功です。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-dark github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">Hi</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> there,</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> {ユーザー名}!</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> You&#39;ve successfully authenticated with the key named id_ed25519, but Gitea does not provide shell access.</span></span>
<span class="line"><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;">If this is unexpected, please log in with password and setup Gitea under another user.</span></span></code></pre></div><p>これで SSH 接続できるようになりました。 リポジトリをクローンするときは以下の画像のように、SSH の方を選択して URI をコピーするようにしてください。</p><p><img src="https://md.trap.jp/uploads/upload_3b5f6128fa73ad298435adb9178310e6.png" alt=""></p><p>また、既に https の方でクローンしてしまった場合は以下のコマンドで URL を変更できます。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-dark github-dark vp-code"><code><span class="line"><span style="--shiki-light:#B392F0;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> git</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> set-url</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#9ECBFF;--shiki-dark:#9ECBFF;"> {SSHのURL}</span></span></code></pre></div><h2 id="参照" tabindex="-1">参照 <a class="header-anchor" href="#参照" aria-label="Permalink to &quot;参照&quot;">​</a></h2><ul><li><a href="https://docs.github.com/ja/authentication/connecting-to-github-with-ssh/about-ssh" target="_blank" rel="noreferrer">SSH について - GitHub Docs</a></li><li><a href="https://docs.github.com/ja/authentication/connecting-to-github-with-ssh/checking-for-existing-ssh-keys" target="_blank" rel="noreferrer">既存の SSH キーの確認 - GitHub Docs</a></li><li><a href="https://docs.github.com/ja/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noreferrer">新しい SSH キーを生成して ssh-agent に追加する - GitHub Docs</a></li><li><a href="https://docs.github.com/ja/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account" target="_blank" rel="noreferrer">GitHub アカウントへの新しい SSH キーの追加 - GitHub Docs</a></li><li><a href="https://docs.github.com/ja/authentication/connecting-to-github-with-ssh/testing-your-ssh-connection" target="_blank" rel="noreferrer">SSH 接続をテストする - GitHub Docs</a></li></ul>`,31),n=[h];function p(l,k,r,d,F,o){return a(),i("div",null,n)}const B=s(e,[["render",p]]);export{g as __pageData,B as default};
